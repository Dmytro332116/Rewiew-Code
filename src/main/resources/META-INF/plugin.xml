<idea-plugin>
    <id>com.rewiew.autofmt</id>
    <name>Rewiew Code Formatter</name>
    <vendor>Rewiew</vendor>

    <description>
        <![CDATA[
        Autoformat and inspect CSS/JS/Twig on save and pre-commit without Node.js.
        ]]>
    </description>

    <dependencies>
        <plugin id="com.intellij.modules.platform"/>
        <plugin id="com.jetbrains.php"/>
        <plugin id="Git4Idea"/>
    </dependencies>

    <extensions defaultExtensionNs="com.intellij">
        <projectService serviceImplementation="com.rewiew.autofmt.settings.AutoFormatSettingsService"/>
        <projectConfigurable instance="com.rewiew.autofmt.settings.AutoFormatConfigurable"/>

        <fileDocumentManagerListener implementation="com.rewiew.autofmt.save.AutoFormatOnSaveListener"/>
        <checkinHandlerFactory implementation="com.rewiew.autofmt.vcs.AutoFormatCheckinHandlerFactory"/>
        <notificationGroup id="RewiewAutoformat" displayType="BALLOON" isLogByDefault="true"/>
        <localInspection language="Twig"
                         shortName="RewiewTwigPrintSpacing"
                         groupName="Rewiew"
                         enabledByDefault="true"
                         implementationClass="com.rewiew.autofmt.twig.RewiewTwigPrintSpacingInspection"/>
        <localInspection language="Twig"
                         shortName="RewiewTwigAttributeNaming"
                         groupName="Rewiew"
                         enabledByDefault="true"
                         implementationClass="com.rewiew.autofmt.twig.RewiewTwigAttributeNamingInspection"/>
    </extensions>

    <actions>
        <action id="com.rewiew.autofmt.RunAutoFormat"
                class="com.rewiew.autofmt.actions.RunAutoFormatAction"
                text="Format CSS/JS/Twig"
                description="Format selected CSS/JS/Twig files using IDE code style">
            <add-to-group group-id="ToolsMenu" anchor="first"/>
        </action>
        <action id="com.rewiew.autofmt.RunAutoFix"
                class="com.rewiew.autofmt.actions.RunAutoFixAction"
                text="Auto-Fix CSS/JS/Twig"
                description="Run formatter and apply safe Twig fixes on selected files">
            <add-to-group group-id="ToolsMenu" anchor="after" relative-to-action="com.rewiew.autofmt.RunAutoFormat"/>
        </action>
        <action id="com.rewiew.autofmt.RunRewiewChecks"
                class="com.rewiew.autofmt.actions.RunRewiewChecksAction"
                text="Run Rewiew Checks (Report)"
                description="Run inspections and generate a readable report">
            <add-to-group group-id="ToolsMenu" anchor="after" relative-to-action="com.rewiew.autofmt.RunAutoFix"/>
        </action>
        <action id="com.rewiew.autofmt.InstallPreCommitHook"
                class="com.rewiew.autofmt.vcs.InstallPreCommitHookAction"
                text="Install/Update Pre-Commit Hook"
                description="Install or update Git pre-commit hook for CSS/JS/Twig formatting and inspection">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
